<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<title>Flutter webapp test</title>
<style>
  body {
    font-family: sans-serif;
    font-size: 20px;
  }
</style>

<body>
  <p>
    <a href='#' id='test-geo'>Prueba geo</a>
  </p>
  <p>
    <a href='#' id='test-barcode'>Prueba QR</a>
  </p>
  <p>
    <a href='#' id='test-content'>Contenido de prueba</a>
  </p>
  <pre id='debug-output'></pre>
  <script>
    var debugOutput = document.getElementById('debug-output');

    function scanBarcode() {
      Native.postMessage('scanBarcode');
    }

    function onBarcodeReady(data) {
      debugOutput.innerText = data;
    }

    function onBarcodeError(message) {
      debugOutput.innerText = message;
    }

    (function init() {
      document.getElementById('test-geo').addEventListener('click', function (e) {
        navigator.geolocation.getCurrentPosition(function (pos) {
          var s = 'Lat ' + pos.coords.latitude + ', Lon ' + pos.coords.longitude;
          debugOutput.innerText = s;
        });
      });

      document.getElementById('test-barcode').addEventListener('click', function (e) {
        scanBarcode();
      });

      document.getElementById('test-content').addEventListener('click', function (e) {
        window.location = 'https://wordpress.org/about/';
      });
    })();

  </script>
</body>

</html>